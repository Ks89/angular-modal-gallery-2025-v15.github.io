<div id="migration" class="title">
  <div class="container">
    <h1>Migration guide</h1>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-12">

      <h2>How to upgrade?</h2>
      <hr>

      <section>
        <h3>from 11.x.x to 12.x.x</h3>
        <br>
        <h4>Step 1 - upgrade &#64;ks89/angular-modal-gallery to the latest 12.x.x version</h4>
        <p>So, in your terminal run: <code>npm install --save &#64;ks89/angular-modal-gallery&#64;latest</code></p>
        <br>
        <h4>Step 2 - upgrade Angular and rxjs</h4>
        <p>Use the latest version of Angular (with the recommended rxjs version). It must be Angular 18 or higher.</p>
      </section>
      <br>
      <br>
      <section>
        <h3>from 10.x.x to 11.x.x</h3>
        <br>
        <h4>Step 1 - upgrade &#64;ks89/angular-modal-gallery to the latest 11.x.x version</h4>
        <p>So, in your terminal run: <code>npm install --save &#64;ks89/angular-modal-gallery&#64;latest</code></p>
        <br>
        <h4>Step 2 - upgrade Angular and rxjs</h4>
        <p>Use the latest version of Angular (with the recommended rxjs version). It must be Angular 16 or higher.</p>
        <br>
        <h4>Step 3 - remove 'hammerjs' and 'mousetrap'</h4>
        <p><b>Remove <code>hammerjs</code> and <code>mousetrap</code> from your <code>package.json</code> and all imports from your application.</b></p>
        <br>
        <h4>Step 4 - remove 'keyboardServiceConfig' from 'ModalLibConfig' configuration object</h4>
        <p>Without <code>mousetrap</code> you won't be able to customize download shortcuts anymore.</p>
      </section>
      <br>
      <br>
      <section>
        <h3>from 9.x.x to 10.x.x</h3>
        <br>

        <h4>Step 1 - upgrade &#64;ks89/angular-modal-gallery to the latest 10.x.x version</h4>
        <p>So, in your terminal run: <code>npm install --save &#64;ks89/angular-modal-gallery&#64;latest</code></p>

        <br>
        <h4>Step 2 - upgrade Angular and rxjs</h4>
        <p>Use the latest version of Angular (with the recommended rxjs version). It must be Angular 15 or higher.</p>
      </section>
      <br>
      <br>
      <section>
        <h3>from 8.x.x to 9.x.x</h3>
        <br>

        <h4>Step 1 - upgrade &#64;ks89/angular-modal-gallery to the latest 9.x.x version</h4>
        <p>So, in your terminal run: <code>npm install --save &#64;ks89/angular-modal-gallery&#64;latest</code></p>

        <br>
        <h4>Step 2 - upgrade Angular and rxjs</h4>
        <p>Use the latest version of Angular (with the recommended rxjs version). It must be Angular 13 or higher.</p>

        <br>

        <h4>Step 3 - remove the generic <code>LibConfig</code> interface, because no more exported.</h4>

        <p>Choose the specific interfaces based on your needs</p>
        <ul>
          <li>in modal-gallery configuration use <code>ModalLibConfig</code></li>
          <li>in plain-gallery configuration use <code>PlainLibConfig</code></li>
          <li>in carousel configuration use <code>CarouselLibConfig</code></li>
        </ul>

        <br>

        <h4>Step 4 - update plain-gallery</h4>
        <ul>
          <li>remove <code>AdvancedLayout</code> from PlainGallery, because already unused since v8.0.0</li>
          <li>remove <code>[showGallery]="true"</code> input from plain-gallery HTML component, because it's unused</li>
          <li>rename <code>(showImage)="..."</code> output into <code>(clickImage)="..."</code> output</li>
        </ul>

        <br>

        <h4>Step 5 - update carousel</h4>
        <ul>
          <li>IE11 legacy mode has been removed from the library, because Angular doesn't support Internet Explorer 11 anymore.
            So you have to remove <code>legacyIE11Mode: true</code> in your code</li>
          <li>remove <code>[previewConfig]</code> and <code>[carouselConfig]</code> inputs from HTML, because replaced with a single <code>[config]="..."</code> like all other components of the library.
            For more information check the <a href="https://github.com/Ks89/angular-modal-gallery/tree/master/examples/angular-cli-13">official example</a> and the
            <a href="https://ks89.github.io/angular-modal-gallery-2022-v10.github.io/features/carousel">documentation page</a>.
            Don't be scared, it's easies then you think. You only need to pass an object moving previews configuration inside it.</li>
          <li>rename <code>(showImage)="..."</code> output into <code>(changeImage)="..."</code> output</li>
        </ul>

        <br>

        <h4>Step 6 - <code>KeyboardEvent.keyCode</code> is no more supported</h4>
        <p>If you are using custom keyCodes via <code>keyboardConfig</code> you have to migrate to the newer <code>KeyboardEvent.code</code></p>
        <p>For more information, please check the <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code">MDN documentation here</a>.</p>

        <p>As a quick example. Previously, you were using integer keyCodes:</p>
        <pre>
        keyboardConfig: &#123;
          esc: 81, // Q keyCode
          left: 40, // Arrow down keyCode
          right: 38 // Arrow ip keyCode
        &#125;
        </pre>
        <p>instead, starting from v9.0.0, you have to use the equivalent codes:</p>
        <pre>
        keyboardConfig: &#123;
          esc: 'KeyQ',
          left: 'ArrowDown',
          right: 'ArrowUp'
        &#125;
        </pre>

        <br>
      </section>
      <br>
      <br>
      <section>
        <h3>from 7.x.x to 8.x.x</h3>
        <br>

        <h4>Step 1 - upgrade &#64;ks89/angular-modal-gallery to the latest 8.x.x version</h4>

        <p>So, in your terminal run: <code>npm install --save &#64;ks89/angular-modal-gallery&#64;latest</code></p>

        <br>
        <h4>Step 2 - upgrade Angular and rxjs</h4>

        <p>Use the latest version of Angular (with the recommended rxjs version). It must be Angular 12 or higher.</p>

        <br>
        <h4>Step 3 - be sure to install the mandatory dependency `&#64;angular/cdk`</h4>

        <p>&#64;angular/cdk is mandatory to support responsiveness of carousel component and to show modal gallery.</p>

        <p>So, in your terminal run: <code>npm install --save &#64;angular/cdk</code></p>

        <br>
        <h4>Step 4 - update module import</h4>

        <p>Replace all occurrences of <code>GalleryModule.forRoot()</code> with <code>GalleryModule</code>.</p>

        <br>
        <h4>Step 5 - update your global style file</h4>

        <p>Add these classes to your global style file:</p>

        <pre>
    &#64;import "~&#64;angular/cdk/overlay-prebuilt.css";

    .ks-modal-gallery-backdrop &#123;
      background: #000 !important;;
      opacity: 0.85 !important;;
    &#125;

    .ks-modal-gallery-panel &#123;
      z-index: 90000 !important;
    &#125;
        </pre>

        <br>
        <h4>Step 6 - update your code</h4>

        <br>

        <h5>Plain Gallery</h5>
        <p>Change HTML code</p>
        <pre>
  &lt;ks-modal-gallery [id]="1" [modalImages]="images"
    [plainGalleryConfig]="plainGalleryRowATags"&gt;&lt;/ks-modal-gallery&gt;
        </pre>
        <p>with</p>
        <pre>
  &lt;ks-plain-gallery [id]="1" [images]="images" [showGallery]="true"
    [config]="libConfigPlainGallery"
    (showImage)="onShow(1, $event)"&gt;&lt;/ks-plain-gallery&gt;
        </pre>
        <p>Then add the LibConfig object and <code>onShow</code> method in Typescript component:</p>
        <pre>
  images: Image[]; // init this value with your images

  constructor(private modalGalleryService: ModalGalleryService) &#123;&#125;

  libConfigPlainGallery: LibConfig = &#123;
    plainGalleryConfig: &#123;
      // your custom plain gallery configuration here
    &#125; as PlainGalleryConfig
  &#125;;

  onShow(id: number, index: number, images: Image[] = this.images): void &#123;
    const dialogRef: ModalGalleryRef = this.modalGalleryService.open(&#123;
      id,
      images,
      currentImage: images[index]
    &#125;) as ModalGalleryRef;
  &#125;
        </pre>

        <br>
        <h5>Modal Gallery</h5>

        <p>In case of Modal Galley, you have to remove HTML selector from all you HTML files, because now it's an Angular service and not a component.</p>
      </section>
    </div>
  </div>
</div>





